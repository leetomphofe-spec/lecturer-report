{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getPLClasses,assignClassToLecturer,getPLLecturers}from'../../services/api';import'./PL.css';// Import the PL CSS\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ClassManagement=_ref=>{let{user}=_ref;const[classes,setClasses]=useState([]);const[lecturers,setLecturers]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetchData();},[]);const fetchData=async()=>{try{const[classesRes,lecturersRes]=await Promise.all([getPLClasses(),getPLLecturers()]);setClasses(classesRes.data);setLecturers(lecturersRes.data);}catch(error){console.error('Error fetching data:',error);}finally{setLoading(false);}};const handleAssignLecturer=async(classId,lecturerId)=>{try{await assignClassToLecturer({class_id:classId,lecturer_id:lecturerId});alert('Class assigned to lecturer successfully!');fetchData();// Refresh data\n}catch(error){alert('Error assigning class to lecturer');}};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading class data...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Class Management\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Class Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Course\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Venue\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Semester\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Assigned Lecturer\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:classes.map(classItem=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:classItem.class_name}),/*#__PURE__*/_jsxs(\"td\",{children:[classItem.course_name,\" (\",classItem.course_code,\")\"]}),/*#__PURE__*/_jsx(\"td\",{children:classItem.venue}),/*#__PURE__*/_jsx(\"td\",{children:classItem.semester}),/*#__PURE__*/_jsx(\"td\",{children:classItem.lecturer_name||/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"Not Assigned\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-select form-select-sm\",value:classItem.lecturer_id||'',onChange:e=>handleAssignLecturer(classItem.id,e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Assign Lecturer\"}),lecturers.map(lecturer=>/*#__PURE__*/_jsx(\"option\",{value:lecturer.id,children:lecturer.name},lecturer.id))]})})]},classItem.id))})]})})})]});};export default ClassManagement;","map":{"version":3,"names":["React","useState","useEffect","getPLClasses","assignClassToLecturer","getPLLecturers","jsx","_jsx","jsxs","_jsxs","ClassManagement","_ref","user","classes","setClasses","lecturers","setLecturers","loading","setLoading","fetchData","classesRes","lecturersRes","Promise","all","data","error","console","handleAssignLecturer","classId","lecturerId","class_id","lecturer_id","alert","children","className","map","classItem","class_name","course_name","course_code","venue","semester","lecturer_name","value","onChange","e","id","target","lecturer","name"],"sources":["C:/Users/USER/MPHOFE/lecturer-reporting-system/frontend/src/components/pl/ClassManagement.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { getPLClasses, assignClassToLecturer, getPLLecturers } from '../../services/api';\r\nimport './PL.css'; // Import the PL CSS\r\n\r\nconst ClassManagement = ({ user }) => {\r\n  const [classes, setClasses] = useState([]);\r\n  const [lecturers, setLecturers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const [classesRes, lecturersRes] = await Promise.all([\r\n        getPLClasses(),\r\n        getPLLecturers()\r\n      ]);\r\n      setClasses(classesRes.data);\r\n      setLecturers(lecturersRes.data);\r\n    } catch (error) {\r\n      console.error('Error fetching data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAssignLecturer = async (classId, lecturerId) => {\r\n    try {\r\n      await assignClassToLecturer({\r\n        class_id: classId,\r\n        lecturer_id: lecturerId\r\n      });\r\n      alert('Class assigned to lecturer successfully!');\r\n      fetchData(); // Refresh data\r\n    } catch (error) {\r\n      alert('Error assigning class to lecturer');\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Loading class data...</div>;\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <div className=\"card-header\">\r\n        <h4>Class Management</h4>\r\n      </div>\r\n      <div className=\"card-body\">\r\n        <div className=\"table-responsive\">\r\n          <table className=\"table table-striped\">\r\n            <thead>\r\n              <tr>\r\n                <th>Class Name</th>\r\n                <th>Course</th>\r\n                <th>Venue</th>\r\n                <th>Semester</th>\r\n                <th>Assigned Lecturer</th>\r\n                <th>Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {classes.map((classItem) => (\r\n                <tr key={classItem.id}>\r\n                  <td>{classItem.class_name}</td>\r\n                  <td>{classItem.course_name} ({classItem.course_code})</td>\r\n                  <td>{classItem.venue}</td>\r\n                  <td>{classItem.semester}</td>\r\n                  <td>\r\n                    {classItem.lecturer_name || \r\n                      <span className=\"text-danger\">Not Assigned</span>\r\n                    }\r\n                  </td>\r\n                  <td>\r\n                    <select \r\n                      className=\"form-select form-select-sm\"\r\n                      value={classItem.lecturer_id || ''}\r\n                      onChange={(e) => handleAssignLecturer(classItem.id, e.target.value)}\r\n                    >\r\n                      <option value=\"\">Assign Lecturer</option>\r\n                      {lecturers.map((lecturer) => (\r\n                        <option key={lecturer.id} value={lecturer.id}>\r\n                          {lecturer.name}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClassManagement;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}