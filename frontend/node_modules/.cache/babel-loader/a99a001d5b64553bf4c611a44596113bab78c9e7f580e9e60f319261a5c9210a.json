{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\MPHOFE\\\\lecturer-reporting-system\\\\frontend\\\\src\\\\components\\\\student\\\\Monitoring.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { getStudentMonitoring, getStudentEnrollments, getStudentRatings, subscribeToReports } from '../../services/api';\nimport './Student.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Monitoring = ({\n  user\n}) => {\n  _s();\n  var _enrollments$find;\n  const [reports, setReports] = useState([]);\n  const [enrollments, setEnrollments] = useState([]);\n  const [ratings, setRatings] = useState([]);\n  const [selectedCourse, setSelectedCourse] = useState('all');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [lastUpdate, setLastUpdate] = useState(new Date());\n  const [isSubscribed, setIsSubscribed] = useState(false);\n  const [pollingInterval, setPollingInterval] = useState(null);\n  const navigate = useNavigate();\n\n  // Memoized data fetcher\n  const fetchData = useCallback(async (showLoading = true) => {\n    if (showLoading) setLoading(true);\n    setError('');\n    try {\n      console.log('ðŸ”„ Fetching latest data for student:', user.id);\n      const [reportsRes, enrollmentsRes, ratingsRes] = await Promise.allSettled([getStudentMonitoring(user.id), getStudentEnrollments(user.id), getStudentRatings(user.id)]);\n\n      // Handle responses with error checking\n      const reportsData = reportsRes.status === 'fulfilled' ? reportsRes.value.data || reportsRes.value || [] : [];\n      const enrollmentsData = enrollmentsRes.status === 'fulfilled' ? enrollmentsRes.value.data || enrollmentsRes.value || [] : [];\n      const ratingsData = ratingsRes.status === 'fulfilled' ? ratingsRes.value.data || ratingsRes.value || [] : [];\n\n      // Check for individual errors\n      const errors = [];\n      if (reportsRes.status === 'rejected') errors.push(`Reports: ${reportsRes.reason.message}`);\n      if (enrollmentsRes.status === 'rejected') errors.push(`Enrollments: ${enrollmentsRes.reason.message}`);\n      if (ratingsRes.status === 'rejected') errors.push(`Ratings: ${ratingsRes.reason.message}`);\n      if (errors.length > 0) {\n        console.warn('âš ï¸ Partial data loaded with errors:', errors);\n      }\n      setReports(reportsData);\n      setEnrollments(enrollmentsData);\n      setRatings(ratingsData);\n      setLastUpdate(new Date());\n      console.log('âœ… Data refresh completed:', {\n        reports: reportsData.length,\n        enrollments: enrollmentsData.length,\n        ratings: ratingsData.length,\n        errors: errors.length\n      });\n      if (errors.length === 3) {\n        throw new Error('All API calls failed');\n      }\n    } catch (error) {\n      console.error('âŒ Error fetching monitoring data:', error);\n      const errorMsg = error.message || 'Failed to load monitoring data';\n      setError(errorMsg);\n    } finally {\n      if (showLoading) setLoading(false);\n    }\n  }, [user.id]);\n\n  // Initial data load\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  // Real-time subscription with better cleanup\n  useEffect(() => {\n    if (!(user !== null && user !== void 0 && user.id)) return;\n    let unsubscribe = null;\n    let pollInterval = null;\n    const setupRealTimeUpdates = async () => {\n      try {\n        console.log('ðŸ”” Setting up real-time updates for student:', user.id);\n        unsubscribe = subscribeToReports(user.id, newReport => {\n          console.log('ðŸ“¨ New report received via real-time:', newReport);\n          setReports(prevReports => {\n            const exists = prevReports.some(report => report.id === newReport.id);\n            if (!exists) {\n              console.log('ðŸ†• Adding new report to list:', newReport.course_name);\n              // Show notification to user\n              if ('Notification' in window && Notification.permission === 'granted') {\n                new Notification('New Lecture Report', {\n                  body: `New report for ${newReport.course_name} by ${newReport.lecturer_name}`,\n                  icon: '/favicon.ico'\n                });\n              }\n              return [newReport, ...prevReports];\n            }\n            return prevReports;\n          });\n          setLastUpdate(new Date());\n        });\n        setIsSubscribed(true);\n      } catch (error) {\n        console.error('âŒ Error setting up real-time updates, falling back to polling:', error);\n        // Fallback to polling\n        pollInterval = setInterval(() => {\n          console.log('â° Polling for updates...');\n          fetchData(false); // Silent refresh\n        }, 30000);\n        setPollingInterval(pollInterval);\n      }\n    };\n    setupRealTimeUpdates();\n\n    // Request notification permission\n    if ('Notification' in window && Notification.permission === 'default') {\n      Notification.requestPermission();\n    }\n\n    // Cleanup function\n    return () => {\n      if (unsubscribe) unsubscribe();\n      if (pollInterval) clearInterval(pollInterval);\n      setIsSubscribed(false);\n    };\n  }, [user.id, fetchData]);\n\n  // Manual refresh with loading state\n  const handleManualRefresh = async () => {\n    await fetchData();\n  };\n\n  // Enhanced filtering with multiple matching strategies\n  const filteredReports = useMemo(() => {\n    if (selectedCourse === 'all') {\n      return reports.filter(report => enrollments.some(enrollment => enrollment.course_code === report.course_code || enrollment.course_id === report.course_id || enrollment.course_name === report.course_name));\n    }\n    return reports.filter(report => report.course_code === selectedCourse || report.course_name === selectedCourse);\n  }, [reports, enrollments, selectedCourse]);\n\n  // Enhanced statistics\n  const stats = useMemo(() => {\n    const totalAttendance = filteredReports.reduce((sum, report) => sum + report.actual_students_present / report.total_students_registered, 0);\n    const avgAttendance = filteredReports.length > 0 ? totalAttendance / filteredReports.length : 0;\n    return {\n      totalReports: reports.length,\n      filteredReports: filteredReports.length,\n      enrolledCourses: enrollments.length,\n      avgAttendance: Math.round(avgAttendance * 100),\n      ratedReports: filteredReports.filter(report => ratings.some(rating => rating.report_id === report.id)).length,\n      uniqueLecturers: new Set(filteredReports.map(r => r.lecturer_name)).size\n    };\n  }, [reports, filteredReports, enrollments, ratings]);\n\n  // Check if student has rated a report\n  const hasRatedReport = useCallback(reportId => {\n    return ratings.some(rating => rating.report_id === reportId);\n  }, [ratings]);\n  const getStudentRating = useCallback(reportId => {\n    const rating = ratings.find(r => r.report_id === reportId);\n    return rating ? rating.rating_value : null;\n  }, [ratings]);\n\n  // Navigation functions\n  const navigateToRating = useCallback(reportId => {\n    navigate(`/student/rating?reportId=${reportId}`);\n  }, [navigate]);\n  const navigateToReportDetails = useCallback(reportId => {\n    navigate(`/student/reports/${reportId}`);\n  }, [navigate]);\n\n  // Format time since last update\n  const getTimeSinceUpdate = useCallback(() => {\n    const now = new Date();\n    const diffInSeconds = Math.floor((now - lastUpdate) / 1000);\n    if (diffInSeconds < 60) return 'just now';\n    if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} min ago`;\n    return `${Math.floor(diffInSeconds / 3600)} hour${Math.floor(diffInSeconds / 3600) > 1 ? 's' : ''} ago`;\n  }, [lastUpdate]);\n\n  // Check if report is new (within last 10 minutes)\n  const isNewReport = useCallback((report, index) => {\n    return index < 3 && Date.now() - new Date(report.created_at || report.date_of_lecture).getTime() < 600000;\n  }, []);\n\n  // Loading state\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"student-monitoring-container student-fade-in\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"student-loading\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"student-loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading your lecture reports...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          children: \"Checking for new reports\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"student-loading-dots\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Error state\n  if (error && reports.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"student-monitoring-container student-fade-in\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"student-alert student-alert-danger\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"\\u26A0\\uFE0F Unable to Load Reports\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"student-action-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"guest-btn guest-btn-primary\",\n            onClick: handleManualRefresh,\n            children: \"\\uD83D\\uDD04 Try Again\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"guest-btn guest-btn-outline\",\n            onClick: () => window.location.reload(),\n            children: \"\\uD83D\\uDD03 Reload Page\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"student-monitoring-container student-fade-in\",\n    children: [process.env.NODE_ENV === 'development' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"debug-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"\\uD83E\\uDDEA Debug Info:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Student: \", user === null || user === void 0 ? void 0 : user.id, \" | Reports: \", reports.length, \" | Enrollments: \", enrollments.length, \" | Filtered: \", filteredReports.length]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Connection: \", isSubscribed ? 'ðŸŸ¢ LIVE' : pollingInterval ? 'ðŸŸ¡ POLLING' : 'ðŸ”´ OFFLINE']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"student-monitoring-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"student-monitoring-title-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\uD83D\\uDCCA Live Lecture Reports Monitoring\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"student-monitoring-subtitle\",\n          children: [\"Real-time updates when lecturers submit new reports\", isSubscribed && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"live-indicator\",\n            children: \" \\u25CF LIVE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 30\n          }, this), pollingInterval && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"polling-indicator\",\n            children: \" \\u23F0 POLLING\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"student-monitoring-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"student-monitoring-stats\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"student-stat-badge\",\n            children: [stats.filteredReports, \" reports \\u2022 \", stats.ratedReports, \" rated \\u2022 Updated \", getTimeSinceUpdate()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"student-monitoring-select\",\n          value: selectedCourse,\n          onChange: e => setSelectedCourse(e.target.value),\n          disabled: enrollments.length === 0,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"all\",\n            children: [\"\\uD83D\\uDCDA All My Courses (\", enrollments.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 13\n          }, this), enrollments.map(enrollment => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: enrollment.course_code,\n            children: [enrollment.course_name, \" (\", enrollment.course_code, \")\"]\n          }, enrollment.course_code || enrollment.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"student-monitoring-refresh\",\n          onClick: handleManualRefresh,\n          title: \"Refresh reports\",\n          disabled: loading,\n          children: loading ? 'â³' : 'ðŸ”„'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }, this), stats.filteredReports > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"student-stats-overview\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"stat-number\",\n          children: stats.filteredReports\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"stat-label\",\n          children: \"Total Reports\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"stat-number\",\n          children: [stats.avgAttendance, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"stat-label\",\n          children: \"Avg Attendance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"stat-number\",\n          children: stats.uniqueLecturers\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"stat-label\",\n          children: \"Lecturers\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"stat-number\",\n          children: stats.ratedReports\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"stat-label\",\n          children: \"Rated\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"student-monitoring-content\",\n      children: enrollments.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"student-empty-state\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"student-empty-icon\",\n          children: \"\\uD83C\\uDF93\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"No Courses Enrolled\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"You haven't enrolled in any courses yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"guest-btn guest-btn-primary\",\n          onClick: () => navigate('/student/classes'),\n          children: \"Browse Available Courses\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 11\n      }, this) : stats.filteredReports === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"student-empty-state\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"student-empty-icon\",\n          children: \"\\uD83D\\uDCCB\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"No Reports Available\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No lecture reports found for your enrolled courses.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 13\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-warning\",\n          children: \"\\u26A0\\uFE0F Some data may not be loaded due to errors\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"student-action-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"guest-btn guest-btn-primary\",\n            onClick: handleManualRefresh,\n            children: \"Check Again\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"guest-btn guest-btn-outline\",\n            onClick: () => setSelectedCourse('all'),\n            children: \"Show All Courses\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"student-monitoring-summary\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\uD83D\\uDCC8 Showing \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: stats.filteredReports\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 28\n            }, this), \" report(s) for\", ' ', /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: selectedCourse === 'all' ? 'all your courses' : ((_enrollments$find = enrollments.find(e => e.course_code === selectedCourse)) === null || _enrollments$find === void 0 ? void 0 : _enrollments$find.course_name) || selectedCourse\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"student-table-container\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"student-monitoring-table\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Course\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 393,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Lecturer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 394,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Date & Time\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 395,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Topic Covered\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 396,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Attendance\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 397,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Your Rating\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 398,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Actions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 399,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 400,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: filteredReports.map((report, index) => {\n                const attendanceRate = report.actual_students_present / report.total_students_registered;\n                const attendanceClass = attendanceRate > 0.7 ? 'high' : attendanceRate > 0.5 ? 'medium' : 'low';\n                const hasRated = hasRatedReport(report.id);\n                const studentRating = getStudentRating(report.id);\n                const isNew = isNewReport(report, index);\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: `student-report-row ${isNew ? 'new-report' : ''}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"student-course-info\",\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: report.course_name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 415,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"student-course-code\",\n                        children: report.course_code\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 416,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 414,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 413,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"student-lecturer-info\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"lecturer-avatar\",\n                      children: \"\\uD83D\\uDC68\\u200D\\uD83C\\uDFEB\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 420,\n                      columnNumber: 27\n                    }, this), report.lecturer_name]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 419,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"student-date-info\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"date-primary\",\n                      children: new Date(report.date_of_lecture).toLocaleDateString('en-US', {\n                        weekday: 'short',\n                        year: 'numeric',\n                        month: 'short',\n                        day: 'numeric'\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 424,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                      className: \"text-muted\",\n                      children: new Date(report.created_at || report.date_of_lecture).toLocaleTimeString()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 432,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 423,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"student-topic-info\",\n                      title: report.topic_taught,\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: report.topic_taught\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 438,\n                        columnNumber: 29\n                      }, this), report.learning_outcomes && /*#__PURE__*/_jsxDEV(\"small\", {\n                        className: \"text-muted d-block\",\n                        children: [report.learning_outcomes.substring(0, 60), \"...\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 440,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 437,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 436,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `student-attendance-badge ${attendanceClass}`,\n                      children: [report.actual_students_present, \"/\", report.total_students_registered, /*#__PURE__*/_jsxDEV(\"small\", {\n                        children: [\"(\", Math.round(attendanceRate * 100), \"%)\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 449,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 447,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 446,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"student-rating-info\",\n                    children: hasRated ? /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"student-rating-display\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"student-rating-stars\",\n                        children: 'â­'.repeat(studentRating)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 455,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"student-rating-value\",\n                        children: [\"(\", studentRating, \"/5)\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 458,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 454,\n                      columnNumber: 29\n                    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"student-not-rated\",\n                      children: \"Not rated\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 461,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 452,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"student-actions\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"action-buttons\",\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"student-view-report-btn\",\n                        onClick: () => navigateToReportDetails(report.id),\n                        title: \"View full report details\",\n                        children: \"\\uD83D\\uDCCB\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 466,\n                        columnNumber: 29\n                      }, this), !hasRated && /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"student-rate-btn\",\n                        onClick: () => navigateToRating(report.id),\n                        title: \"Rate this lecture\",\n                        children: \"\\u2B50\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 474,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 465,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 464,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"student-status\",\n                    children: [isNew && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"new-indicator\",\n                      title: \"New report - submitted recently\",\n                      children: \"NEW\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 486,\n                      columnNumber: 29\n                    }, this), hasRated && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"rated-indicator\",\n                      title: \"You've rated this lecture\",\n                      children: \"RATED\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 491,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 484,\n                    columnNumber: 25\n                  }, this)]\n                }, report.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 23\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"student-monitoring-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"student-quick-stats\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\uD83D\\uDCCA \", stats.filteredReports, \" reports\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u2022\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\uD83D\\uDC65 \", stats.uniqueLecturers, \" lecturers\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u2022\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 509,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\uD83D\\uDCDA \", new Set(filteredReports.map(r => r.course_name)).size, \" courses\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 510,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u2022\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 511,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\u2B50 \", stats.ratedReports, \" rated\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 512,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 505,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"student-update-info\",\n            children: [\"Last updated: \", lastUpdate.toLocaleTimeString(), isSubscribed && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"live-badge\",\n              children: \"LIVE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 34\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 270,\n    columnNumber: 5\n  }, this);\n};\n_s(Monitoring, \"D6MdxIEq0IpLbaCImhi1VDOuc2c=\", false, function () {\n  return [useNavigate];\n});\n_c = Monitoring;\nexport default Monitoring;\nvar _c;\n$RefreshReg$(_c, \"Monitoring\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","useNavigate","getStudentMonitoring","getStudentEnrollments","getStudentRatings","subscribeToReports","jsxDEV","_jsxDEV","Fragment","_Fragment","Monitoring","user","_s","_enrollments$find","reports","setReports","enrollments","setEnrollments","ratings","setRatings","selectedCourse","setSelectedCourse","loading","setLoading","error","setError","lastUpdate","setLastUpdate","Date","isSubscribed","setIsSubscribed","pollingInterval","setPollingInterval","navigate","fetchData","showLoading","console","log","id","reportsRes","enrollmentsRes","ratingsRes","Promise","allSettled","reportsData","status","value","data","enrollmentsData","ratingsData","errors","push","reason","message","length","warn","Error","errorMsg","unsubscribe","pollInterval","setupRealTimeUpdates","newReport","prevReports","exists","some","report","course_name","window","Notification","permission","body","lecturer_name","icon","setInterval","requestPermission","clearInterval","handleManualRefresh","filteredReports","filter","enrollment","course_code","course_id","stats","totalAttendance","reduce","sum","actual_students_present","total_students_registered","avgAttendance","totalReports","enrolledCourses","Math","round","ratedReports","rating","report_id","uniqueLecturers","Set","map","r","size","hasRatedReport","reportId","getStudentRating","find","rating_value","navigateToRating","navigateToReportDetails","getTimeSinceUpdate","now","diffInSeconds","floor","isNewReport","index","created_at","date_of_lecture","getTime","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","location","reload","process","env","NODE_ENV","onChange","e","target","disabled","title","attendanceRate","attendanceClass","hasRated","studentRating","isNew","toLocaleDateString","weekday","year","month","day","toLocaleTimeString","topic_taught","learning_outcomes","substring","repeat","_c","$RefreshReg$"],"sources":["C:/Users/USER/MPHOFE/lecturer-reporting-system/frontend/src/components/student/Monitoring.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { \r\n  getStudentMonitoring, \r\n  getStudentEnrollments, \r\n  getStudentRatings,\r\n  subscribeToReports \r\n} from '../../services/api';\r\nimport './Student.css';\r\n\r\nconst Monitoring = ({ user }) => {\r\n  const [reports, setReports] = useState([]);\r\n  const [enrollments, setEnrollments] = useState([]);\r\n  const [ratings, setRatings] = useState([]);\r\n  const [selectedCourse, setSelectedCourse] = useState('all');\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [lastUpdate, setLastUpdate] = useState(new Date());\r\n  const [isSubscribed, setIsSubscribed] = useState(false);\r\n  const [pollingInterval, setPollingInterval] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  // Memoized data fetcher\r\n  const fetchData = useCallback(async (showLoading = true) => {\r\n    if (showLoading) setLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      console.log('ðŸ”„ Fetching latest data for student:', user.id);\r\n      \r\n      const [reportsRes, enrollmentsRes, ratingsRes] = await Promise.allSettled([\r\n        getStudentMonitoring(user.id),\r\n        getStudentEnrollments(user.id),\r\n        getStudentRatings(user.id)\r\n      ]);\r\n      \r\n      // Handle responses with error checking\r\n      const reportsData = reportsRes.status === 'fulfilled' \r\n        ? (reportsRes.value.data || reportsRes.value || [])\r\n        : [];\r\n        \r\n      const enrollmentsData = enrollmentsRes.status === 'fulfilled'\r\n        ? (enrollmentsRes.value.data || enrollmentsRes.value || [])\r\n        : [];\r\n        \r\n      const ratingsData = ratingsRes.status === 'fulfilled'\r\n        ? (ratingsRes.value.data || ratingsRes.value || [])\r\n        : [];\r\n      \r\n      // Check for individual errors\r\n      const errors = [];\r\n      if (reportsRes.status === 'rejected') errors.push(`Reports: ${reportsRes.reason.message}`);\r\n      if (enrollmentsRes.status === 'rejected') errors.push(`Enrollments: ${enrollmentsRes.reason.message}`);\r\n      if (ratingsRes.status === 'rejected') errors.push(`Ratings: ${ratingsRes.reason.message}`);\r\n      \r\n      if (errors.length > 0) {\r\n        console.warn('âš ï¸ Partial data loaded with errors:', errors);\r\n      }\r\n      \r\n      setReports(reportsData);\r\n      setEnrollments(enrollmentsData);\r\n      setRatings(ratingsData);\r\n      setLastUpdate(new Date());\r\n      \r\n      console.log('âœ… Data refresh completed:', {\r\n        reports: reportsData.length,\r\n        enrollments: enrollmentsData.length,\r\n        ratings: ratingsData.length,\r\n        errors: errors.length\r\n      });\r\n      \r\n      if (errors.length === 3) {\r\n        throw new Error('All API calls failed');\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Error fetching monitoring data:', error);\r\n      const errorMsg = error.message || 'Failed to load monitoring data';\r\n      setError(errorMsg);\r\n    } finally {\r\n      if (showLoading) setLoading(false);\r\n    }\r\n  }, [user.id]);\r\n\r\n  // Initial data load\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [fetchData]);\r\n\r\n  // Real-time subscription with better cleanup\r\n  useEffect(() => {\r\n    if (!user?.id) return;\r\n\r\n    let unsubscribe = null;\r\n    let pollInterval = null;\r\n\r\n    const setupRealTimeUpdates = async () => {\r\n      try {\r\n        console.log('ðŸ”” Setting up real-time updates for student:', user.id);\r\n        \r\n        unsubscribe = subscribeToReports(user.id, (newReport) => {\r\n          console.log('ðŸ“¨ New report received via real-time:', newReport);\r\n          \r\n          setReports(prevReports => {\r\n            const exists = prevReports.some(report => report.id === newReport.id);\r\n            if (!exists) {\r\n              console.log('ðŸ†• Adding new report to list:', newReport.course_name);\r\n              // Show notification to user\r\n              if ('Notification' in window && Notification.permission === 'granted') {\r\n                new Notification('New Lecture Report', {\r\n                  body: `New report for ${newReport.course_name} by ${newReport.lecturer_name}`,\r\n                  icon: '/favicon.ico'\r\n                });\r\n              }\r\n              return [newReport, ...prevReports];\r\n            }\r\n            return prevReports;\r\n          });\r\n          \r\n          setLastUpdate(new Date());\r\n        });\r\n\r\n        setIsSubscribed(true);\r\n        \r\n      } catch (error) {\r\n        console.error('âŒ Error setting up real-time updates, falling back to polling:', error);\r\n        // Fallback to polling\r\n        pollInterval = setInterval(() => {\r\n          console.log('â° Polling for updates...');\r\n          fetchData(false); // Silent refresh\r\n        }, 30000);\r\n        \r\n        setPollingInterval(pollInterval);\r\n      }\r\n    };\r\n\r\n    setupRealTimeUpdates();\r\n\r\n    // Request notification permission\r\n    if ('Notification' in window && Notification.permission === 'default') {\r\n      Notification.requestPermission();\r\n    }\r\n\r\n    // Cleanup function\r\n    return () => {\r\n      if (unsubscribe) unsubscribe();\r\n      if (pollInterval) clearInterval(pollInterval);\r\n      setIsSubscribed(false);\r\n    };\r\n  }, [user.id, fetchData]);\r\n\r\n  // Manual refresh with loading state\r\n  const handleManualRefresh = async () => {\r\n    await fetchData();\r\n  };\r\n\r\n  // Enhanced filtering with multiple matching strategies\r\n  const filteredReports = useMemo(() => {\r\n    if (selectedCourse === 'all') {\r\n      return reports.filter(report => \r\n        enrollments.some(enrollment => \r\n          enrollment.course_code === report.course_code ||\r\n          enrollment.course_id === report.course_id ||\r\n          enrollment.course_name === report.course_name\r\n        )\r\n      );\r\n    }\r\n    \r\n    return reports.filter(report => \r\n      report.course_code === selectedCourse || \r\n      report.course_name === selectedCourse\r\n    );\r\n  }, [reports, enrollments, selectedCourse]);\r\n\r\n  // Enhanced statistics\r\n  const stats = useMemo(() => {\r\n    const totalAttendance = filteredReports.reduce((sum, report) => \r\n      sum + (report.actual_students_present / report.total_students_registered), 0\r\n    );\r\n    const avgAttendance = filteredReports.length > 0 ? totalAttendance / filteredReports.length : 0;\r\n    \r\n    return {\r\n      totalReports: reports.length,\r\n      filteredReports: filteredReports.length,\r\n      enrolledCourses: enrollments.length,\r\n      avgAttendance: Math.round(avgAttendance * 100),\r\n      ratedReports: filteredReports.filter(report => \r\n        ratings.some(rating => rating.report_id === report.id)\r\n      ).length,\r\n      uniqueLecturers: new Set(filteredReports.map(r => r.lecturer_name)).size\r\n    };\r\n  }, [reports, filteredReports, enrollments, ratings]);\r\n\r\n  // Check if student has rated a report\r\n  const hasRatedReport = useCallback((reportId) => {\r\n    return ratings.some(rating => rating.report_id === reportId);\r\n  }, [ratings]);\r\n\r\n  const getStudentRating = useCallback((reportId) => {\r\n    const rating = ratings.find(r => r.report_id === reportId);\r\n    return rating ? rating.rating_value : null;\r\n  }, [ratings]);\r\n\r\n  // Navigation functions\r\n  const navigateToRating = useCallback((reportId) => {\r\n    navigate(`/student/rating?reportId=${reportId}`);\r\n  }, [navigate]);\r\n\r\n  const navigateToReportDetails = useCallback((reportId) => {\r\n    navigate(`/student/reports/${reportId}`);\r\n  }, [navigate]);\r\n\r\n  // Format time since last update\r\n  const getTimeSinceUpdate = useCallback(() => {\r\n    const now = new Date();\r\n    const diffInSeconds = Math.floor((now - lastUpdate) / 1000);\r\n    \r\n    if (diffInSeconds < 60) return 'just now';\r\n    if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} min ago`;\r\n    return `${Math.floor(diffInSeconds / 3600)} hour${Math.floor(diffInSeconds / 3600) > 1 ? 's' : ''} ago`;\r\n  }, [lastUpdate]);\r\n\r\n  // Check if report is new (within last 10 minutes)\r\n  const isNewReport = useCallback((report, index) => {\r\n    return index < 3 && Date.now() - new Date(report.created_at || report.date_of_lecture).getTime() < 600000;\r\n  }, []);\r\n\r\n  // Loading state\r\n  if (loading) {\r\n    return (\r\n      <div className=\"student-monitoring-container student-fade-in\">\r\n        <div className=\"student-loading\">\r\n          <div className=\"student-loading-spinner\"></div>\r\n          <p>Loading your lecture reports...</p>\r\n          <small>Checking for new reports</small>\r\n          <div className=\"student-loading-dots\">\r\n            <span></span>\r\n            <span></span>\r\n            <span></span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Error state\r\n  if (error && reports.length === 0) {\r\n    return (\r\n      <div className=\"student-monitoring-container student-fade-in\">\r\n        <div className=\"student-alert student-alert-danger\">\r\n          <h5>âš ï¸ Unable to Load Reports</h5>\r\n          <p>{error}</p>\r\n          <div className=\"student-action-buttons\">\r\n            <button className=\"guest-btn guest-btn-primary\" onClick={handleManualRefresh}>\r\n              ðŸ”„ Try Again\r\n            </button>\r\n            <button \r\n              className=\"guest-btn guest-btn-outline\" \r\n              onClick={() => window.location.reload()}\r\n            >\r\n              ðŸ”ƒ Reload Page\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"student-monitoring-container student-fade-in\">\r\n      {/* Debug panel for development */}\r\n      {process.env.NODE_ENV === 'development' && (\r\n        <div className=\"debug-panel\">\r\n          <strong>ðŸ§ª Debug Info:</strong>\r\n          <div>Student: {user?.id} | Reports: {reports.length} | Enrollments: {enrollments.length} | Filtered: {filteredReports.length}</div>\r\n          <div>Connection: {isSubscribed ? 'ðŸŸ¢ LIVE' : pollingInterval ? 'ðŸŸ¡ POLLING' : 'ðŸ”´ OFFLINE'}</div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"student-monitoring-header\">\r\n        <div className=\"student-monitoring-title-section\">\r\n          <h4>ðŸ“Š Live Lecture Reports Monitoring</h4>\r\n          <p className=\"student-monitoring-subtitle\">\r\n            Real-time updates when lecturers submit new reports\r\n            {isSubscribed && <span className=\"live-indicator\"> â— LIVE</span>}\r\n            {pollingInterval && <span className=\"polling-indicator\"> â° POLLING</span>}\r\n          </p>\r\n        </div>\r\n        \r\n        <div className=\"student-monitoring-controls\">\r\n          <div className=\"student-monitoring-stats\">\r\n            <span className=\"student-stat-badge\">\r\n              {stats.filteredReports} reports â€¢ {stats.ratedReports} rated â€¢ Updated {getTimeSinceUpdate()}\r\n            </span>\r\n          </div>\r\n          \r\n          <select \r\n            className=\"student-monitoring-select\"\r\n            value={selectedCourse}\r\n            onChange={(e) => setSelectedCourse(e.target.value)}\r\n            disabled={enrollments.length === 0}\r\n          >\r\n            <option value=\"all\">ðŸ“š All My Courses ({enrollments.length})</option>\r\n            {enrollments.map((enrollment) => (\r\n              <option key={enrollment.course_code || enrollment.id} value={enrollment.course_code}>\r\n                {enrollment.course_name} ({enrollment.course_code})\r\n              </option>\r\n            ))}\r\n          </select>\r\n          \r\n          <button \r\n            className=\"student-monitoring-refresh\"\r\n            onClick={handleManualRefresh}\r\n            title=\"Refresh reports\"\r\n            disabled={loading}\r\n          >\r\n            {loading ? 'â³' : 'ðŸ”„'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Stats Overview */}\r\n      {stats.filteredReports > 0 && (\r\n        <div className=\"student-stats-overview\">\r\n          <div className=\"stat-card\">\r\n            <span className=\"stat-number\">{stats.filteredReports}</span>\r\n            <span className=\"stat-label\">Total Reports</span>\r\n          </div>\r\n          <div className=\"stat-card\">\r\n            <span className=\"stat-number\">{stats.avgAttendance}%</span>\r\n            <span className=\"stat-label\">Avg Attendance</span>\r\n          </div>\r\n          <div className=\"stat-card\">\r\n            <span className=\"stat-number\">{stats.uniqueLecturers}</span>\r\n            <span className=\"stat-label\">Lecturers</span>\r\n          </div>\r\n          <div className=\"stat-card\">\r\n            <span className=\"stat-number\">{stats.ratedReports}</span>\r\n            <span className=\"stat-label\">Rated</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"student-monitoring-content\">\r\n        {enrollments.length === 0 ? (\r\n          <div className=\"student-empty-state\">\r\n            <div className=\"student-empty-icon\">ðŸŽ“</div>\r\n            <h5>No Courses Enrolled</h5>\r\n            <p>You haven't enrolled in any courses yet.</p>\r\n            <button \r\n              className=\"guest-btn guest-btn-primary\"\r\n              onClick={() => navigate('/student/classes')}\r\n            >\r\n              Browse Available Courses\r\n            </button>\r\n          </div>\r\n        ) : stats.filteredReports === 0 ? (\r\n          <div className=\"student-empty-state\">\r\n            <div className=\"student-empty-icon\">ðŸ“‹</div>\r\n            <h5>No Reports Available</h5>\r\n            <p>No lecture reports found for your enrolled courses.</p>\r\n            {error && <p className=\"text-warning\">âš ï¸ Some data may not be loaded due to errors</p>}\r\n            <div className=\"student-action-buttons\">\r\n              <button className=\"guest-btn guest-btn-primary\" onClick={handleManualRefresh}>\r\n                Check Again\r\n              </button>\r\n              <button \r\n                className=\"guest-btn guest-btn-outline\"\r\n                onClick={() => setSelectedCourse('all')}\r\n              >\r\n                Show All Courses\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <div className=\"student-monitoring-summary\">\r\n              <p>\r\n                ðŸ“ˆ Showing <strong>{stats.filteredReports}</strong> report(s) for{' '}\r\n                <strong>\r\n                  {selectedCourse === 'all' \r\n                    ? 'all your courses' \r\n                    : enrollments.find(e => e.course_code === selectedCourse)?.course_name || selectedCourse\r\n                  }\r\n                </strong>\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"student-table-container\">\r\n              <table className=\"student-monitoring-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Course</th>\r\n                    <th>Lecturer</th>\r\n                    <th>Date & Time</th>\r\n                    <th>Topic Covered</th>\r\n                    <th>Attendance</th>\r\n                    <th>Your Rating</th>\r\n                    <th>Actions</th>\r\n                    <th>Status</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {filteredReports.map((report, index) => {\r\n                    const attendanceRate = report.actual_students_present / report.total_students_registered;\r\n                    const attendanceClass = attendanceRate > 0.7 ? 'high' : attendanceRate > 0.5 ? 'medium' : 'low';\r\n                    const hasRated = hasRatedReport(report.id);\r\n                    const studentRating = getStudentRating(report.id);\r\n                    const isNew = isNewReport(report, index);\r\n                    \r\n                    return (\r\n                      <tr key={report.id} className={`student-report-row ${isNew ? 'new-report' : ''}`}>\r\n                        <td>\r\n                          <div className=\"student-course-info\">\r\n                            <strong>{report.course_name}</strong>\r\n                            <span className=\"student-course-code\">{report.course_code}</span>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"student-lecturer-info\">\r\n                          <span className=\"lecturer-avatar\">ðŸ‘¨â€ðŸ«</span>\r\n                          {report.lecturer_name}\r\n                        </td>\r\n                        <td className=\"student-date-info\">\r\n                          <div className=\"date-primary\">\r\n                            {new Date(report.date_of_lecture).toLocaleDateString('en-US', {\r\n                              weekday: 'short',\r\n                              year: 'numeric',\r\n                              month: 'short',\r\n                              day: 'numeric'\r\n                            })}\r\n                          </div>\r\n                          <small className=\"text-muted\">\r\n                            {new Date(report.created_at || report.date_of_lecture).toLocaleTimeString()}\r\n                          </small>\r\n                        </td>\r\n                        <td>\r\n                          <div className=\"student-topic-info\" title={report.topic_taught}>\r\n                            <strong>{report.topic_taught}</strong>\r\n                            {report.learning_outcomes && (\r\n                              <small className=\"text-muted d-block\">\r\n                                {report.learning_outcomes.substring(0, 60)}...\r\n                              </small>\r\n                            )}\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <span className={`student-attendance-badge ${attendanceClass}`}>\r\n                            {report.actual_students_present}/{report.total_students_registered}\r\n                            <small>({Math.round(attendanceRate * 100)}%)</small>\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"student-rating-info\">\r\n                          {hasRated ? (\r\n                            <div className=\"student-rating-display\">\r\n                              <span className=\"student-rating-stars\">\r\n                                {'â­'.repeat(studentRating)}\r\n                              </span>\r\n                              <span className=\"student-rating-value\">({studentRating}/5)</span>\r\n                            </div>\r\n                          ) : (\r\n                            <span className=\"student-not-rated\">Not rated</span>\r\n                          )}\r\n                        </td>\r\n                        <td className=\"student-actions\">\r\n                          <div className=\"action-buttons\">\r\n                            <button \r\n                              className=\"student-view-report-btn\"\r\n                              onClick={() => navigateToReportDetails(report.id)}\r\n                              title=\"View full report details\"\r\n                            >\r\n                              ðŸ“‹\r\n                            </button>\r\n                            {!hasRated && (\r\n                              <button \r\n                                className=\"student-rate-btn\"\r\n                                onClick={() => navigateToRating(report.id)}\r\n                                title=\"Rate this lecture\"\r\n                              >\r\n                                â­\r\n                              </button>\r\n                            )}\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"student-status\">\r\n                          {isNew && (\r\n                            <span className=\"new-indicator\" title=\"New report - submitted recently\">\r\n                              NEW\r\n                            </span>\r\n                          )}\r\n                          {hasRated && (\r\n                            <span className=\"rated-indicator\" title=\"You've rated this lecture\">\r\n                              RATED\r\n                            </span>\r\n                          )}\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n\r\n            {/* Quick Stats Footer */}\r\n            <div className=\"student-monitoring-footer\">\r\n              <div className=\"student-quick-stats\">\r\n                <span>ðŸ“Š {stats.filteredReports} reports</span>\r\n                <span>â€¢</span>\r\n                <span>ðŸ‘¥ {stats.uniqueLecturers} lecturers</span>\r\n                <span>â€¢</span>\r\n                <span>ðŸ“š {new Set(filteredReports.map(r => r.course_name)).size} courses</span>\r\n                <span>â€¢</span>\r\n                <span>â­ {stats.ratedReports} rated</span>\r\n              </div>\r\n              <div className=\"student-update-info\">\r\n                Last updated: {lastUpdate.toLocaleTimeString()}\r\n                {isSubscribed && <span className=\"live-badge\">LIVE</span>}\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Monitoring;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}